<?xml version="1.0" encoding="UTF8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.small.fruitandvagetablemallspringboot.dao.ShoppingStarMapper">
    <select id="queryForShoppingStarById" parameterType="int" resultType="hashMap">
        SELECT st.commodityId as id,st.id as starId,
               pi.nickName,
               pi.userName,
               pi.userPhone,
               pi.userSex,
               pi.userStatus,
               ci.commodityClassid,
               ci.commodityFreight,
               ci.commodityHot,
               ci.commodityInformation,
               ci.commodityName,
               ci.commodityImage,
               ci.commodityNumber,
               ci.commodityPrice
        FROM shopping_star st
                 LEFT JOIN personal_information pi ON st.userId = pi.id
                 LEFT JOIN commodity_information ci ON st.commodityId = ci.id
        where pi.id = #{uid};
    </select>

    <select id="queryForShoppingStarAndPersonInfo" resultType="hashMap">
        SELECT st.*,
               pi.nickName,
               pi.userName,
               pi.userPhone,
               pi.userSex,
               pi.userStatus,
               ci.commodityClassId,
               ci.commodityFreight,
               ci.commodityHot,
               ci.commodityInformation,
               ci.commodityName,
               ci.commodityImage,
               ci.commodityNumber,
               ci.commodityPrice
        FROM shopping_star st
                 LEFT JOIN personal_information pi ON st.userId = pi.id
                 LEFT JOIN commodity_information ci ON st.commodityId = ci.id;
    </select>

    <insert id="addShoppingStar" parameterType="shoppingStar">
        insert into shopping_star(commodityId, userId)
        VALUES (#{commodityId}, #{userId})
    </insert>

    <update id="updateShoppingStarById" parameterType="shoppingStar">
        update shopping_star
        <set>
            <if test="''!=commodityId and null!=commodityId">
                commodityid=#{userId},
            </if>
            <if test="''!=userId and null!=userId">
                userId=#{userId},
            </if>
        </set>
        where id=#{id}
    </update>

    <delete id="deleteShoppingStarById" parameterType="int">
        delete
        from shopping_star
        where id = #{id}
    </delete>
</mapper>